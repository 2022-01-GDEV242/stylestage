[build]
  # Directory to change to before starting a build.
  # This is where we will look for package.json/.nvmrc/etc.
  base = ""

  # Directory (relative to root of your repo) that contains the deploy-ready
  # HTML files and assets generated by the build. If a base directory has
  # been specified, include it in the publish directory path.
  publish = "public"

  # Default build command.
  command = "AWS_LAMBDA_FUNCTION_NAME=trickpuppeteer npm run build"

  Functions = "api"

  [[redirects]]
    from = "/feed/"
    to = "/feed/feed.xml"
    status = 200

  [[redirects]]
    from = "/style-img/:style"
    to = "/.netlify/functions/style-img"
    status = 200
    force = true

  [[redirects]]
    from = "/social-img/:slug/:title"
    to = "/.netlify/functions/social-img"
    status = 200
    force = true

  [[redirects]]
    from = "/social-img/:slug/:title/:author"
    to = "/.netlify/functions/social-img"
    status = 200
    force = true